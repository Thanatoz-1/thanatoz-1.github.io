<!DOCTYPE html>
<html class="no-js" lang="en-us">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Jupyter Magic</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="Jupyter magic commands">
	<meta name="generator" content="Hugo 0.53" />
	<meta property="og:title" content="Jupyter Magic" />
<meta property="og:description" content="Jupyter magic commands" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://thanatoz-1.github.io/post/jupyter-magic/" /><meta property="article:published_time" content="2017-08-21T00:00:00&#43;00:00"/>
<meta property="article:modified_time" content="2017-08-21T00:00:00&#43;00:00"/>

	<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Jupyter Magic"/>
<meta name="twitter:description" content="Jupyter magic commands"/>

	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">
	<link rel="stylesheet" href="https://thanatoz-1.github.io/css/style.css">
	<link rel="stylesheet" href="https://thanatoz-1.github.io/css/custom.css">
	<link rel="shortcut icon" href="https://thanatoz-1.github.io/favicon.ico">
		
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-132390992-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container">
		<div class="logo">
			<a class="logo__link" href="https://thanatoz-1.github.io/" title="Tushar&#39;s blog" rel="home">
				<div class="logo__title">Tushar&#39;s blog</div>
				<div class="logo__tagline">Deep learning best practices</div>
			</a>
		</div>
		
<nav class="menu">
	<button class="menu__btn" aria-haspopup="true" aria-expanded="false" tabindex="0">
		<span class="menu__btn-title" tabindex="-1">Menu</span>
	</button>
	<ul class="menu__list">
		<li class="menu__item">
			<a class="menu__link" href="https://thanatoz-1.github.io/post/colab-and-fastai/">Colab with fast.ai and kaggle api</a>
		</li>
		<li class="menu__item menu__item--active">
			<a class="menu__link" href="https://thanatoz-1.github.io/post/jupyter-magic/">Jupyter Magic</a>
		</li>
	</ul>
</nav>

	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Jupyter Magic</h1>
			<p class="post__lead">Getting the most out of your jupyter notebooks by using Jupyter magic</p>
			<div class="post__meta meta">
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg>
	<time class="meta__text" datetime="2017-08-21T00:00:00">2017-08-21</time>
</div>

<div class="meta__item-categories meta__item">
	<svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2l1 2h8v11h-16v-13z"/></svg>
	<span class="meta__text"><a class="meta__link" href="https://thanatoz-1.github.io/categories/general" rel="category">General</a></span>
</div>
</div>
		</header>
		<figure class="post__thumbnail">
			<img src="https://jupyter.org/assets/hublogo.svg" alt="Jupyter Magic">
		</figure><div class="content post__content clearfix">
			

<p><center><h1> Jupyter MAGIC cheatsheet</h1></center></p>

<p>Jupyter notebooks are greatly used in the Python and Data Science community and by all the people who love <em>Jupyter Notebooks</em>. I love notebooks so much that even this post has been created using one jupyter notebook.</p>

<p>You might have come across commands such as <code>%matplotlib inline</code> <code>%time</code> <code>%autoreload</code> etc. These are called Jupyter MAGIC. Jupyter magic are special commands that are built-in jupyter notebooks to extend its capablities. I am here to introduce you to the jupyter MAGIC commands and demonstrate how it can ease your working and further extend the notebooks capablities.</p>

<p>I&rsquo;ll try to keep this post short and mostly focus on the coding part by implementing all the magic commands that will help you get going.</p>

<p>Let&rsquo;s begin!</p>

<h3 id="time-it-module">Time it Module</h3>

<h4 id="time-time">(%time, %%time)</h4>

<p>Lots and lots of time, we are required to time our codes segements to check onto their efficiency and see the amount of time they require. We know that a piece of code that has lower time complexity is always efficient and can help us crunch large numbers in a fraction of time.</p>

<p>To time the modules, we can build our own functions for timing modules as follows</p>

<pre><code class="language-python">import time
import random
import numpy as np

def create_one_million_numbers():
    a=[]
    for i in range(int(1e6)):
        a.append(random.randint(0,1e6))
    return a
</code></pre>

<pre><code class="language-python">start=time.time()
create_one_million_numbers()
stop=time.time()
print(&quot;Wall time {0:.4} s&quot;.format(stop-start))
</code></pre>

<pre><code>Wall time 1.543 s
</code></pre>

<p>You can see how we have to see extra 3 lines everytime we call the target function. This certainly might not seem like a problem to most of us when we have to do just for a few couple of time. But what if you have to call this every now and then?</p>

<p>For solving this problem, we a blessed with a jupyter magic <strong>%time</strong></p>

<pre><code class="language-python">%time a=create_one_million_numbers()
%time a=[i for i in range(1000000)]
%time a=np.random.randint(1000000)
</code></pre>

<pre><code>CPU times: user 1.48 s, sys: 32 ms, total: 1.51 s
Wall time: 1.51 s
CPU times: user 35.1 ms, sys: 28 ms, total: 63.2 ms
Wall time: 72.3 ms
CPU times: user 9.81 ms, sys: 3.97 ms, total: 13.8 ms
Wall time: 13.8 ms
</code></pre>

<pre><code class="language-python">%%time
a=create_one_million_numbers()
a=[i for i in range(1000000)]
a=np.random.randint(1000000)
</code></pre>

<pre><code>CPU times: user 1.57 s, sys: 47.9 ms, total: 1.61 s
Wall time: 1.61 s
</code></pre>

<p>There could be times when we are required to view the enviornment variables that we have created so far during the execution of our notebook. To view these, we can use <strong>%who_ls</strong></p>

<pre><code class="language-python">%who_ls
</code></pre>

<pre><code>['a', 'create_one_million_numbers', 'np', 'random', 'start', 'stop', 'time']
</code></pre>

<p>We can see that all the functions, imports and variables we have created are visible now.</p>

<h3 id="system-date">System date</h3>

<h4 id="system-date-1">%system date</h4>

<p>Whenever we want to get the current time of the system, we can use the <strong>%system date</strong> module to get the current date and time</p>

<pre><code class="language-python">%system date
</code></pre>

<pre><code>['Sat Jan 19 02:53:54 UTC 2019']
</code></pre>

<pre><code class="language-python">a = %system date
print(a)
</code></pre>

<pre><code>['Sat Jan 19 02:53:54 UTC 2019']
</code></pre>

<p>Shortcut <code>!!date</code> also works equally</p>

<pre><code class="language-python">!!date
</code></pre>

<pre><code>['Sat Jan 19 02:53:54 UTC 2019']
</code></pre>

<h3 id="matplotlib-magic">Matplotlib magic</h3>

<h4 id="matplotlib-inline">%matplotlib inline</h4>

<p>This is by far the most popular magic command and might be the first command that you might have encountered. The matplotlib generates the plot canvas frame in a new window which is not rendered into the jupyter notebook. To overcome this problem, %matplotlib inline command is used. This command forces the canvas to be formed into the notebook itself.</p>

<pre><code class="language-python">from matplotlib import pyplot as plt
%matplotlib inline
</code></pre>

<pre><code class="language-python">plt.plot(np.log(np.arange(1000)))
</code></pre>

<p><img src="https://thanatoz-1.github.io/images/output_22_2.png" alt="plot" /></p>

<h3 id="auto-reload">Auto reload</h3>

<h4 id="load-ext-autoreload">%load_ext autoreload</h4>

<h4 id="autoreload">%autoreload</h4>

<p>When you are working with external tools or changing the enviornment variables, this will certainly help you a lot. The external commands help you autoreload the tools and libraries at a specified defined interval. So whenever there is even a minor change, we do not have to run the imports to update the local enviornment of the notebook</p>

<pre><code class="language-python">%load_ext autoreload
%autoreload 2
</code></pre>

<h3 id="languages-inside-notebooks">Languages inside notebooks</h3>

<p>We are at a number of time required to use some other languages from inside the notebook. May it be <em>bash</em>, <em>javascript</em>, <em>html</em>, <em>latex</em>, <em>markdown</em>, <em>python2</em>, <em>python3</em>, <em>ruby</em> or a ton of other languages, jupyter gives you options to run them too.</p>

<p>The <code>%</code>(single percent) can be used to implement the single line command or <code>%%</code>(double percent) to dedicate the current cell to those specific languages.</p>

<pre><code class="language-bash">%%bash 

echo &quot;This is single line command&quot; &gt; some_temp_file.txt
cat some_temp_file.txt
</code></pre>

<pre><code>This is single line command
</code></pre>

<p>Specifically for bash commands, the jupyter notebook gives a special shortcut <code>!</code>. This can be used to run single line bash command in the cell.</p>

<pre><code class="language-python">!ls /
</code></pre>

<pre><code>bin   home        lib64   opt   sbin  tmp      vmlinuz.old
boot  initrd.img      lost+found  proc  snap  usr
dev   initrd.img.old  media   root  srv   var
etc   lib         mnt     run   sys   vmlinuz
</code></pre>

<pre><code class="language-python">%%html

&lt;p style='background-color:#bbdefb; padding:20px;'&gt; Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodoconsequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. &lt;/p&gt;

</code></pre>

<p style='background-color:#bbdefb;padding:20px;'> Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
proident, sunt in culpa qui officia deserunt mollit anim id est laborum. </p>

		</div>
		
<div class="post__tags tags clearfix">
	<svg class="icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5 0 11V3C0 1.5.8.8.8.8S1.5 0 3 0h8c1.5 0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/></svg>
	<ul class="tags__list">
		<li class="tags__item"><a class="tags__link btn" href="https://thanatoz-1.github.io/tags/general/" rel="tag">General</a></li>
		<li class="tags__item"><a class="tags__link btn" href="https://thanatoz-1.github.io/tags/jupyter/" rel="tag">Jupyter</a></li>
	</ul>
</div>
	</article>
</main>


<nav class="post-nav flex">
	<div class="post-nav__item post-nav__item--next">
		<a class="post-nav__link" href="https://thanatoz-1.github.io/post/colab-and-fastai/" rel="next"><span class="post-nav__caption">Next&thinsp;»</span><p class="post-nav__post-title">Colab with fast.ai and kaggle api</p></a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2019 Tushar Dhyani.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
	</div>
<script async defer src="https://thanatoz-1.github.io/js/menu.js"></script></body>
</html>